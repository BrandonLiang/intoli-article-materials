# No API Is the Best API — The elegant power of Power Assert

In [No API Is the Best API — The elegant power of Power Assert](https://intoli.com/blog/power-assert), we take a look at how [Power Assert](https://github.com/power-assert-js/power-assert) can be used to automatically generate contextual error messages when using Node's [assert](https://nodejs.org/api/assert.html) module for assertions.
This allows you to get the best of both worlds; you can use a very simple assertion API while still taking advantage of rich and useful assertion messages.
Power Assert accomplishes this by transforming your tests before they run and using the code itself to determine the relevant information to display.
You can check out [the original article](https://intoli.com/blog/power-assert) for more details, but here we'll just focus on the project configuration and running the tests.


## Installing Dependencies

The project dependencies are listed in [package.json](package.json) and [yarn.lock](yarn.lock).
You can install them by running the following.

```bash
# Or: `npm install`
yarn install
```

This will install the [Mocha](https://github.com/mochajs/mocha) test runner, a few [Babel](https://babeljs.io/)-related packages, [Power Assert](https://github.com/power-assert-js/power-assert), and the [Power Assert Babel Preset](https://github.com/power-assert-js/babel-preset-power-assert) inside of `node_modules/`.


## The Babel Configuration

The key to the tests being transformed when the tests are run is the Babel configuration.
It's located in [.babelrc](.babelrc), and it tells Babel to use the Power Assert preset when `NODE_ENV` is set to `testing`.
It also specifies that the [Babel env preset](https://babeljs.io/docs/plugins/preset-env/) should be used to target Node v6.10.
The non-testing Babel configuration can be customized freely without impacting the use of Power Assert.

It's also worth mentioning that Mocha needs to be configured to use Babel in order for the tests to be transformed.
This is accomplished using [Babel register](https://babeljs.io/docs/usage/babel-register/) and the Mocha `--require` option.

```bash
NODE_ENV=testing mocha --exit --require babel-register"
```

This same command is included in [package.json](package.json) as a script, so it's equivalent to running `yarn test`.


## The Tests

The tests themselves are all located in [test/test-assertion-errors.js](test/test-assertion-errors.js).
There's nothing specific to Power-Assert in the tests, they're just generic tests that use Node's `assert` module.
They are each purposely designed to fail however, so that you can easily see what the error messages generated by Power Assert look like.
